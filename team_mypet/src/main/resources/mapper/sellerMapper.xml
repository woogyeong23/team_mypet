<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace = "com.jeonju.mypet.seller">

	<select id="getSellerProductList" parameterType="string" resultType="Hashmap">
		select a.p_idx, p_name, p_price, p_discount, p_disprice, p_wday, p_modifyday, p_status, p_category_large, p_category_small,
			ifnull(avg(review_stars),0) as avg_reviews_stars, count(review_stars) as cnt_reviews
			,p_sys_filename
			from product a join p_category b on a.p_category_idx = b.p_category_idx left join review c on a.p_idx = c.p_idx
			where a.p_idx in (select p_idx from product where seller_idx=(select seller_idx from sellerstory where midx=#{midx}))
			group by a.p_idx

	</select>
	<select id="getSellerProductDetail" parameterType="string" resultType="productVo">
		select * from product where p_idx=#{p_idx}
	</select>
	<select id="getSellerProductImgs" parameterType="string" resultType="product_imgVo">
		select * from product_img where p_idx=#{p_idx}
	</select>
	
	
	
</mapper>